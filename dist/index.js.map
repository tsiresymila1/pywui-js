{"version":3,"sources":["../src/index.ts"],"sourcesContent":["declare global {\n    interface Window {\n        pywebview: {\n            api: {\n                invoke: (command: string, ...args: any[]) => Promise<string>;\n                emit: (event: string, ...args: any[]) => Promise<void>;\n            };\n        };\n    }\n}\n\ninterface PyWuiResponse<T = any> {\n    status: \"success\" | \"error\";\n    data?: T;\n    message?: string;\n}\n\n// `invoke` function to call Python commands\nexport async function invoke<T = any>(command: string, ...args: any[]): Promise<T> {\n    try {\n        const response: PyWuiResponse<T> = await (window as any).pywebview.api.invoke(command, ...args);\n        if (response.status === \"success\" && response.data !== undefined) {\n            return response.data;\n        } else {\n            throw new Error(response.message || \"Unknown error occurred.\");\n        }\n    } catch (error) {\n        console.error(\"Error calling Python command:\", error);\n        throw error;\n    }\n}\n\ntype PyWuiEvent<T> = {\n    event: string\n    data?: T\n}\n\nexport function listen<T = any>(event: string, callback: (type: string, data?: T) => void) {\n    window.addEventListener(`pywui:${event}`, e => {\n        const payload = (e as any)['detail'] as PyWuiEvent<T>\n        callback(payload.event, payload.data);\n    })\n\n    function unlisten(callback?: (e: any) => void) {\n        const defaultCallback = (ev: any) => {\n        }\n        window.removeEventListener(`pywui:${event}`, callback ?? defaultCallback)\n    }\n\n    return unlisten\n}\n\nexport async function emit<T>(event: string, data: T): Promise<void> {\n    try {\n        await (window as any).pywebview.api.emit(event, data);\n    } catch (error) {\n        console.error(\"Error emitting  event:\", error);\n        throw error;\n    }\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA,SAAsB,OAAgB,YAAoB,MAAyB;AAAA;AAC/E,QAAI;AACA,YAAM,WAA6B,MAAO,OAAe,UAAU,IAAI,OAAO,SAAS,GAAG,IAAI;AAC9F,UAAI,SAAS,WAAW,aAAa,SAAS,SAAS,QAAW;AAC9D,eAAO,SAAS;AAAA,MACpB,OAAO;AACH,cAAM,IAAI,MAAM,SAAS,WAAW,yBAAyB;AAAA,MACjE;AAAA,IACJ,SAAS,OAAO;AACZ,cAAQ,MAAM,iCAAiC,KAAK;AACpD,YAAM;AAAA,IACV;AAAA,EACJ;AAAA;AAOO,SAAS,OAAgB,OAAe,UAA4C;AACvF,SAAO,iBAAiB,SAAS,KAAK,IAAI,OAAK;AAC3C,UAAM,UAAW,EAAU,QAAQ;AACnC,aAAS,QAAQ,OAAO,QAAQ,IAAI;AAAA,EACxC,CAAC;AAED,WAAS,SAASA,WAA6B;AAC3C,UAAM,kBAAkB,CAAC,OAAY;AAAA,IACrC;AACA,WAAO,oBAAoB,SAAS,KAAK,IAAIA,aAAA,OAAAA,YAAY,eAAe;AAAA,EAC5E;AAEA,SAAO;AACX;AAEA,SAAsB,KAAQ,OAAe,MAAwB;AAAA;AACjE,QAAI;AACA,YAAO,OAAe,UAAU,IAAI,KAAK,OAAO,IAAI;AAAA,IACxD,SAAS,OAAO;AACZ,cAAQ,MAAM,0BAA0B,KAAK;AAC7C,YAAM;AAAA,IACV;AAAA,EACJ;AAAA;","names":["callback"]}